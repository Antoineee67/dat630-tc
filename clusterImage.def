BootStrap: docker
FROM: ubuntu:latest

%files
    ./src /app/src
    ./tools /app/tools
    ./CMakeLists.txt /app/CMakeLists.txt

%post
    apt-get -y update && apt-get install -y --no-install-recommends python3 cmake build-essential openmpi-bin libopenmpi-dev
    cd /app
    cmake -S . -B build/ -D CMAKE_BUILD_TYPE=Release
    cmake --build build/

%runscript
    /app/build/treecode nbody=160000 tstop=1
